(function(){"use strict";var t={85:function(t,e,s){var a=s(144),l=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},i=[],r=s(1001),o={},n=(0,r.Z)(o,l,i,!1,null,null,null),c=n.exports,u=s(4720),d=s.n(u);a["default"].use(d());var m=s(8345),p=function(){var t=this,e=t._self._c;return e("div",{staticClass:"login-container"},[e("el-card",{staticClass:"login-card",attrs:{header:"请先登录"}},[e("el-form",{nativeOn:{submit:function(e){return e.preventDefault(),t.login.apply(null,arguments)}}},[e("el-form-item",{attrs:{label:"用户名"}},[e("el-input",{model:{value:t.loginModel.username,callback:function(e){t.$set(t.loginModel,"username",e)},expression:"loginModel.username"}})],1),e("el-form-item",{attrs:{label:"密码"}},[e("el-input",{attrs:{type:"password"},model:{value:t.loginModel.password,callback:function(e){t.$set(t.loginModel,"password",e)},expression:"loginModel.password"}})],1),e("el-form-item",[e("el-button",{attrs:{type:"primary","native-type":"submit"}},[t._v(" 登录 ")])],1)],1)],1)],1)},h=[],f={name:"LoginView",data(){return{loginModel:{}}},methods:{async login(){const t=await this.$http.post("login",this.loginModel);localStorage.token=t.data.token,this.$router.push("/"),this.$message.success("登录成功")}}},v=f,b=(0,r.Z)(v,p,h,!1,null,null,null),g=b.exports,y=function(){var t=this,e=t._self._c;return e("el-container",{staticStyle:{height:"100vh"}},[e("el-aside",{staticStyle:{"background-color":"rgb(238, 241, 246)"},attrs:{width:"200px"}},[e("el-menu",{attrs:{router:"","default-openeds":["3"],"unique-opened":"","default-active":t.$route.path}},[e("el-submenu",{attrs:{index:"1"}},[e("template",{slot:"title"},[e("i",{staticClass:"el-icon-message"}),t._v("内容管理 ")]),e("el-menu-item-group",[e("template",{slot:"title"},[t._v("物品")]),e("el-menu-item",{attrs:{index:"/items/create"}},[t._v(" 新建物品 ")]),e("el-menu-item",{attrs:{index:"/items/list"}},[t._v(" 物品列表 ")])],2),e("el-menu-item-group",[e("template",{slot:"title"},[t._v("英雄")]),e("el-menu-item",{attrs:{index:"/heroes/create"}},[t._v(" 新建英雄 ")]),e("el-menu-item",{attrs:{index:"/heroes/list"}},[t._v(" 英雄列表 ")])],2),e("el-menu-item-group",[e("template",{slot:"title"},[t._v("文章")]),e("el-menu-item",{attrs:{index:"/articles/create"}},[t._v(" 新建文章 ")]),e("el-menu-item",{attrs:{index:"/articles/list"}},[t._v(" 文章列表 ")])],2)],2),e("el-submenu",{attrs:{index:"2"}},[e("template",{slot:"title"},[e("i",{staticClass:"el-icon-message"}),t._v("运营管理 ")]),e("el-menu-item-group",[e("template",{slot:"title"},[t._v("广告位")]),e("el-menu-item",{attrs:{index:"/adverts/create"}},[t._v(" 新建广告位 ")]),e("el-menu-item",{attrs:{index:"/adverts/list"}},[t._v(" 广告位列表 ")])],2)],2),e("el-submenu",{attrs:{index:"3"}},[e("template",{slot:"title"},[e("i",{staticClass:"el-icon-message"}),t._v("系统设置 ")]),e("el-menu-item-group",[e("template",{slot:"title"},[t._v("分类")]),e("el-menu-item",{attrs:{index:"/categories/create"}},[t._v(" 新建分类 ")]),e("el-menu-item",{attrs:{index:"/categories/list"}},[t._v(" 分类列表 ")])],2),e("el-menu-item-group",[e("template",{slot:"title"},[t._v("管理员")]),e("el-menu-item",{attrs:{index:"/admin_users/create"}},[t._v(" 新建管理员 ")]),e("el-menu-item",{attrs:{index:"/admin_users/list"}},[t._v(" 管理员列表 ")])],2)],2)],1)],1),e("el-container",[e("el-header",{staticStyle:{"text-align":"right","font-size":"12px"}},[e("el-dropdown",[e("i",{staticClass:"el-icon-setting",staticStyle:{"margin-right":"15px"}}),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e("el-dropdown-item",[t._v("查看")]),e("el-dropdown-item",[t._v("新增")]),e("el-dropdown-item",[t._v("删除")])],1)],1),e("span",[t._v("王小虎")])],1),e("el-main",[e("router-view",{key:t.$route.path})],1)],1)],1)},_=[],$={name:"MainView",data(){return{}}},x=$,M=(0,r.Z)(x,y,_,!1,null,null,null),w=M.exports,k=function(){var t=this,e=t._self._c;return e("div",{staticClass:"category-edit"},[e("h1",[t._v(t._s(t.editId?"编辑":"新建")+"分类")]),e("el-form",{attrs:{"label-width":"120px"},nativeOn:{submit:function(e){return e.preventDefault(),t.save.apply(null,arguments)}}},[e("el-form-item",{attrs:{label:"上级分类"}},[e("el-select",{attrs:{placeholder:"请选择"},model:{value:t.categoryModel.parent,callback:function(e){t.$set(t.categoryModel,"parent",e)},expression:"categoryModel.parent"}},t._l(t.parents,(function(t){return e("el-option",{key:t._id,attrs:{label:t.name,value:t._id}})})),1)],1),e("el-form-item",{attrs:{label:"名称"}},[e("el-input",{model:{value:t.categoryModel.name,callback:function(e){t.$set(t.categoryModel,"name",e)},expression:"categoryModel.name"}})],1),e("el-form-item",[e("el-button",{attrs:{type:"primary","native-type":"submit"}},[t._v("保存")])],1)],1)],1)},I=[],C={name:"CategoryEdit",props:{editId:{type:String,default:""}},data(){return{categoryModel:{},parents:[]}},created(){this.fetchParents(),this.editId&&this.fetch()},methods:{async fetchParents(){const t=await this.$http.get("rest/categories");this.parents=t.data},async fetch(){const t=await this.$http.get(`rest/categories/${this.editId}`);this.categoryModel=t.data},async save(){this.editId?await this.$http.put(`rest/categories/${this.editId}`,this.categoryModel):await this.$http.post("rest/categories",this.categoryModel),this.$router.push("/categories/list"),this.$message({type:"success",message:"保存成功"})}}},S=C,U=(0,r.Z)(S,k,I,!1,null,null,null),T=U.exports,O=function(){var t=this,e=t._self._c;return e("div",{staticClass:"category-list"},[e("h1",[t._v("分类列表")]),e("el-table",{attrs:{data:t.items}},[e("el-table-column",{attrs:{prop:"_id",label:"ID"}}),e("el-table-column",{attrs:{prop:"parent.name",label:"上级分类"}}),e("el-table-column",{attrs:{prop:"name",label:"分类名称"}}),e("el-table-column",{attrs:{fixed:"right",label:"操作",width:"180"},scopedSlots:t._u([{key:"default",fn:function({row:s}){return[e("el-button",{attrs:{type:"text",size:"small"},on:{click:function(e){return t.$router.push(`/categories/edit/${s._id}`)}}},[t._v("编辑")]),e("el-button",{attrs:{type:"text",size:"small"},on:{click:function(e){return t.removeCategory(s)}}},[t._v("删除")])]}}])})],1)],1)},z=[],A={name:"CategoryList",data(){return{items:[]}},created(){this.fetch()},methods:{async fetch(){const t=await this.$http.get("rest/categories");this.items=t.data},removeCategory(t){this.$confirm(`是否确定要删除分类 "${t.name}"`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{await this.$http.delete(`rest/categories/${t._id}`),this.$message({type:"success",message:"删除成功!"}),this.fetch()})).catch((()=>{this.$message({type:"info",message:"已取消删除"})}))}}},Z=A,B=(0,r.Z)(Z,O,z,!1,null,null,null),D=B.exports,E=function(){var t=this,e=t._self._c;return e("div",{staticClass:"item-edit"},[e("h1",[t._v(t._s(t.editId?"编辑":"新建")+"物品")]),e("el-form",{attrs:{"label-width":"120px"},nativeOn:{submit:function(e){return e.preventDefault(),t.save.apply(null,arguments)}}},[e("el-form-item",{attrs:{label:"名称"}},[e("el-input",{model:{value:t.itemModel.name,callback:function(e){t.$set(t.itemModel,"name",e)},expression:"itemModel.name"}})],1),e("el-form-item",{attrs:{label:"图标"}},[e("el-upload",{staticClass:"avatar-uploader",attrs:{headers:t.getAuthHeaders(),action:t.uploadUrl,"show-file-list":!1,"on-success":t.afterUpload}},[t.itemModel.icon?e("img",{staticClass:"avatar",attrs:{src:t.itemModel.icon}}):e("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e("el-form-item",[e("el-button",{attrs:{type:"primary","native-type":"submit"}},[t._v("保存")])],1)],1)],1)},H=[],P={name:"ItemEdit",props:{editId:{type:String,default:""}},data(){return{itemModel:{}}},created(){this.editId&&this.fetch()},methods:{afterUpload(t){this.$set(this.itemModel,"icon",t.url)},async fetch(){const t=await this.$http.get(`rest/items/${this.editId}`);this.itemModel=t.data},async save(){this.editId?await this.$http.put(`rest/items/${this.editId}`,this.itemModel):await this.$http.post("rest/items",this.itemModel),this.$router.push("/items/list"),this.$message({type:"success",message:"保存成功"})}}},j=P,L=(0,r.Z)(j,E,H,!1,null,null,null),R=L.exports,V=function(){var t=this,e=t._self._c;return e("div",{staticClass:"item-list"},[e("h1",[t._v("物品列表")]),e("el-table",{attrs:{data:t.items}},[e("el-table-column",{attrs:{prop:"_id",label:"ID"}}),e("el-table-column",{attrs:{prop:"name",label:"物品名称"}}),e("el-table-column",{attrs:{label:"图标"},scopedSlots:t._u([{key:"default",fn:function({row:t}){return[e("img",{staticStyle:{height:"3rem"},attrs:{src:t.icon,alt:""}})]}}])}),e("el-table-column",{attrs:{fixed:"right",label:"操作",width:"180"},scopedSlots:t._u([{key:"default",fn:function({row:s}){return[e("el-button",{attrs:{type:"text",size:"small"},on:{click:function(e){return t.$router.push(`/items/edit/${s._id}`)}}},[t._v("编辑")]),e("el-button",{attrs:{type:"text",size:"small"},on:{click:function(e){return t.removeItem(s)}}},[t._v("删除")])]}}])})],1)],1)},q=[],F={name:"ItemList",data(){return{items:[]}},created(){this.fetch()},methods:{async fetch(){const t=await this.$http.get("rest/items");this.items=t.data},removeItem(t){this.$confirm(`是否确定要删除物品 "${t.name}"`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{await this.$http.delete(`rest/items/${t._id}`),this.$message({type:"success",message:"删除成功!"}),this.fetch()})).catch((()=>{this.$message({type:"info",message:"已取消删除"})}))}}},N=F,G=(0,r.Z)(N,V,q,!1,null,null,null),J=G.exports,K=function(){var t=this,e=t._self._c;return e("div",{staticClass:"hero-edit"},[e("h1",[t._v(t._s(t.editId?"编辑":"新建")+"英雄")]),e("el-form",{attrs:{"label-width":"120px"},nativeOn:{submit:function(e){return e.preventDefault(),t.save.apply(null,arguments)}}},[e("el-tabs",{attrs:{type:"border-card",value:"basic"}},[e("el-tab-pane",{attrs:{label:"基础信息",name:"basic"}},[e("el-form-item",{attrs:{label:"名称"}},[e("el-input",{model:{value:t.heroModel.name,callback:function(e){t.$set(t.heroModel,"name",e)},expression:"heroModel.name"}})],1),e("el-form-item",{attrs:{label:"称号"}},[e("el-input",{model:{value:t.heroModel.title,callback:function(e){t.$set(t.heroModel,"title",e)},expression:"heroModel.title"}})],1),e("el-form-item",{attrs:{label:"头像"}},[e("el-upload",{staticClass:"avatar-uploader",attrs:{headers:t.getAuthHeaders(),action:t.uploadUrl,"show-file-list":!1,"on-success":e=>t.$set(t.heroModel,"avatar",e.url)}},[t.heroModel.avatar?e("img",{staticClass:"avatar",attrs:{src:t.heroModel.avatar}}):e("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e("el-form-item",{attrs:{label:"背景图"}},[e("el-upload",{staticClass:"avatar-uploader",attrs:{headers:t.getAuthHeaders(),action:t.uploadUrl,"show-file-list":!1,"on-success":e=>t.$set(t.heroModel,"banner",e.url)}},[t.heroModel.banner?e("img",{staticClass:"avatar",attrs:{src:t.heroModel.banner}}):e("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e("el-form-item",{attrs:{label:"类型"}},[e("el-select",{attrs:{multiple:""},model:{value:t.heroModel.categories,callback:function(e){t.$set(t.heroModel,"categories",e)},expression:"heroModel.categories"}},t._l(t.categories,(function(t){return e("el-option",{key:t._id,attrs:{label:t.name,value:t._id}})})),1)],1),e("el-form-item",{attrs:{label:"难度"}},[e("el-rate",{staticStyle:{"margin-top":"0.6rem"},attrs:{max:9,"show-score":""},model:{value:t.heroModel.scores.difficult,callback:function(e){t.$set(t.heroModel.scores,"difficult",e)},expression:"heroModel.scores.difficult"}})],1),e("el-form-item",{attrs:{label:"技能"}},[e("el-rate",{staticStyle:{"margin-top":"0.6rem"},attrs:{max:9,"show-score":""},model:{value:t.heroModel.scores.skills,callback:function(e){t.$set(t.heroModel.scores,"skills",e)},expression:"heroModel.scores.skills"}})],1),e("el-form-item",{attrs:{label:"攻击"}},[e("el-rate",{staticStyle:{"margin-top":"0.6rem"},attrs:{max:9,"show-score":""},model:{value:t.heroModel.scores.attack,callback:function(e){t.$set(t.heroModel.scores,"attack",e)},expression:"heroModel.scores.attack"}})],1),e("el-form-item",{attrs:{label:"生存"}},[e("el-rate",{staticStyle:{"margin-top":"0.6rem"},attrs:{max:9,"show-score":""},model:{value:t.heroModel.scores.survive,callback:function(e){t.$set(t.heroModel.scores,"survive",e)},expression:"heroModel.scores.survive"}})],1),e("el-form-item",{attrs:{label:"顺风出装"}},[e("el-select",{attrs:{multiple:""},model:{value:t.heroModel.items1,callback:function(e){t.$set(t.heroModel,"items1",e)},expression:"heroModel.items1"}},t._l(t.items,(function(t){return e("el-option",{key:t._id,attrs:{label:t.name,value:t._id}})})),1)],1),e("el-form-item",{attrs:{label:"逆风出装"}},[e("el-select",{attrs:{multiple:""},model:{value:t.heroModel.items2,callback:function(e){t.$set(t.heroModel,"items2",e)},expression:"heroModel.items2"}},t._l(t.items,(function(t){return e("el-option",{key:t._id,attrs:{label:t.name,value:t._id}})})),1)],1),e("el-form-item",{attrs:{label:"使用技巧"}},[e("el-input",{attrs:{type:"textarea"},model:{value:t.heroModel.usageTips,callback:function(e){t.$set(t.heroModel,"usageTips",e)},expression:"heroModel.usageTips"}})],1),e("el-form-item",{attrs:{label:"对抗技巧"}},[e("el-input",{attrs:{type:"textarea"},model:{value:t.heroModel.battleTips,callback:function(e){t.$set(t.heroModel,"battleTips",e)},expression:"heroModel.battleTips"}})],1),e("el-form-item",{attrs:{label:"团战思路"}},[e("el-input",{attrs:{type:"textarea"},model:{value:t.heroModel.teamTips,callback:function(e){t.$set(t.heroModel,"teamTips",e)},expression:"heroModel.teamTips"}})],1)],1),e("el-tab-pane",{attrs:{label:"技能",name:"skills"}},[e("el-button",{attrs:{size:"small"},on:{click:function(e){return t.heroModel.skills.push({})}}},[e("i",{staticClass:"el-icon-plus"}),t._v(" 添加技能 ")]),e("el-row",{staticStyle:{"flex-wrap":"wrap"},attrs:{type:"flex"}},t._l(t.heroModel.skills,(function(s,a){return e("el-col",{key:a,attrs:{md:12}},[e("el-form-item",{attrs:{label:"名称"}},[e("el-input",{model:{value:s.name,callback:function(e){t.$set(s,"name",e)},expression:"item.name"}})],1),e("el-form-item",{attrs:{label:"图标"}},[e("el-upload",{staticClass:"avatar-uploader",attrs:{headers:t.getAuthHeaders(),action:t.uploadUrl,"show-file-list":!1,"on-success":e=>t.$set(s,"icon",e.url)}},[s.icon?e("img",{staticClass:"avatar",attrs:{src:s.icon}}):e("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e("el-form-item",{attrs:{label:"冷却值"}},[e("el-input",{model:{value:s.delay,callback:function(e){t.$set(s,"delay",e)},expression:"item.delay"}})],1),e("el-form-item",{attrs:{label:"消耗"}},[e("el-input",{model:{value:s.cost,callback:function(e){t.$set(s,"cost",e)},expression:"item.cost"}})],1),e("el-form-item",{attrs:{label:"描述"}},[e("el-input",{attrs:{type:"textarea"},model:{value:s.description,callback:function(e){t.$set(s,"description",e)},expression:"item.description"}})],1),e("el-form-item",{attrs:{label:"小提示"}},[e("el-input",{attrs:{type:"textarea"},model:{value:s.tips,callback:function(e){t.$set(s,"tips",e)},expression:"item.tips"}})],1),e("el-form-item",[e("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(e){return t.heroModel.skills.splice(a,1)}}},[t._v("删除")])],1)],1)})),1)],1),e("el-tab-pane",{attrs:{label:"最佳搭档",name:"partners"}},[e("el-button",{attrs:{size:"small"},on:{click:function(e){return t.heroModel.partners.push({})}}},[e("i",{staticClass:"el-icon-plus"}),t._v(" 添加英雄 ")]),e("el-row",{staticStyle:{"flex-wrap":"wrap"},attrs:{type:"flex"}},t._l(t.heroModel.partners,(function(s,a){return e("el-col",{key:a,attrs:{md:12}},[e("el-form-item",{attrs:{label:"英雄"}},[e("el-select",{attrs:{filterable:"",clearable:""},model:{value:s.hero,callback:function(e){t.$set(s,"hero",e)},expression:"item.hero"}},t._l(t.heroes,(function(t){return e("el-option",{key:t._id,attrs:{value:t._id,label:t.name}})})),1)],1),e("el-form-item",{attrs:{label:"描述"}},[e("el-input",{attrs:{type:"textarea"},model:{value:s.description,callback:function(e){t.$set(s,"description",e)},expression:"item.description"}})],1),e("el-form-item",[e("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(e){return t.heroModel.partners.splice(a,1)}}},[t._v("删除")])],1)],1)})),1)],1)],1),e("el-form-item",{staticStyle:{"margin-top":"1rem"}},[e("el-button",{attrs:{type:"primary","native-type":"submit"}},[t._v("保存")])],1)],1)],1)},Q=[],W={name:"HeroEdit",props:{editId:{type:String,default:""}},data(){return{heroModel:{name:"",scores:{},skills:[],partners:[]},categories:[],items:[],heroes:[]}},created(){this.fetchCategories(),this.fetchItems(),this.fetchHeroes(),this.editId&&this.fetch()},methods:{async fetch(){const t=await this.$http.get(`rest/heroes/${this.editId}`);this.heroModel=Object.assign({},this.heroModel,t.data)},async fetchCategories(){const t=await this.$http.get("rest/categories");this.categories=t.data},async fetchItems(){const t=await this.$http.get("/rest/items");this.items=t.data},async fetchHeroes(){const t=await this.$http.get("/rest/heroes");this.heroes=t.data},async save(){this.editId?await this.$http.put(`rest/heroes/${this.editId}`,this.heroModel):await this.$http.post("rest/heroes",this.heroModel),this.$router.push("/heroes/list"),this.$message({type:"success",message:"保存成功"})}}},X=W,Y=(0,r.Z)(X,K,Q,!1,null,null,null),tt=Y.exports,et=function(){var t=this,e=t._self._c;return e("div",{staticClass:"hero-list"},[e("h1",[t._v("英雄列表")]),e("el-table",{attrs:{data:t.items}},[e("el-table-column",{attrs:{prop:"_id",label:"ID"}}),e("el-table-column",{attrs:{prop:"name",label:"英雄名称"}}),e("el-table-column",{attrs:{prop:"title",label:"称号"}}),e("el-table-column",{attrs:{label:"头像"},scopedSlots:t._u([{key:"default",fn:function({row:t}){return[e("img",{staticStyle:{height:"3rem"},attrs:{src:t.avatar,alt:""}})]}}])}),e("el-table-column",{attrs:{fixed:"right",label:"操作",width:"180"},scopedSlots:t._u([{key:"default",fn:function({row:s}){return[e("el-button",{attrs:{type:"text",size:"small"},on:{click:function(e){return t.$router.push(`/heroes/edit/${s._id}`)}}},[t._v("编辑")]),e("el-button",{attrs:{type:"text",size:"small"},on:{click:function(e){return t.removeHero(s)}}},[t._v("删除")])]}}])})],1)],1)},st=[],at={name:"HeroList",data(){return{items:[]}},created(){this.fetch()},methods:{async fetch(){const t=await this.$http.get("rest/heroes");this.items=t.data},removeHero(t){this.$confirm(`是否确定要删除英雄 "${t.name}"`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{await this.$http.delete(`rest/heroes/${t._id}`),this.$message({type:"success",message:"删除成功!"}),this.fetch()})).catch((()=>{this.$message({type:"info",message:"已取消删除"})}))}}},lt=at,it=(0,r.Z)(lt,et,st,!1,null,null,null),rt=it.exports,ot=function(){var t=this,e=t._self._c;return e("div",{staticClass:"article-edit"},[e("h1",[t._v(t._s(t.editId?"编辑":"新建")+"文章")]),e("el-form",{attrs:{"label-width":"120px"},nativeOn:{submit:function(e){return e.preventDefault(),t.save.apply(null,arguments)}}},[e("el-form-item",{attrs:{label:"所属分类"}},[e("el-select",{attrs:{multiple:""},model:{value:t.articleModel.categories,callback:function(e){t.$set(t.articleModel,"categories",e)},expression:"articleModel.categories"}},t._l(t.categories,(function(t){return e("el-option",{key:t._id,attrs:{label:t.name,value:t._id}})})),1)],1),e("el-form-item",{attrs:{label:"标题"}},[e("el-input",{model:{value:t.articleModel.title,callback:function(e){t.$set(t.articleModel,"title",e)},expression:"articleModel.title"}})],1),e("el-form-item",{attrs:{label:"详情"}},[e("vue-editor",{attrs:{useCustomImageHandler:""},on:{"image-added":t.handleImageAdded},model:{value:t.articleModel.body,callback:function(e){t.$set(t.articleModel,"body",e)},expression:"articleModel.body"}})],1),e("el-form-item",[e("el-button",{attrs:{type:"primary","native-type":"submit"}},[t._v("保存")])],1)],1)],1)},nt=[],ct=s(2739),ut={name:"ArticleEdit",components:{VueEditor:ct.bR},props:{editId:{type:String,default:""}},data(){return{articleModel:{},categories:[]}},created(){this.fetchCategories(),this.editId&&this.fetch()},methods:{async fetchCategories(){const t=await this.$http.get("rest/categories");this.categories=t.data},async fetch(){const t=await this.$http.get(`rest/articles/${this.editId}`);this.articleModel=t.data},async save(){this.editId?await this.$http.put(`rest/articles/${this.editId}`,this.articleModel):await this.$http.post("rest/articles",this.articleModel),this.$router.push("/articles/list"),this.$message({type:"success",message:"保存成功"})},async handleImageAdded(t,e,s,a){const l=new FormData;l.append("file",t);const i=await this.$http.post("upload",l);e.insertEmbed(s,"image",i.data.url),a()}}},dt=ut,mt=(0,r.Z)(dt,ot,nt,!1,null,null,null),pt=mt.exports,ht=function(){var t=this,e=t._self._c;return e("div",{staticClass:"article-list"},[e("h1",[t._v("文章列表")]),e("el-table",{attrs:{data:t.items}},[e("el-table-column",{attrs:{prop:"_id",label:"ID"}}),e("el-table-column",{attrs:{prop:"title",label:"标题"}}),e("el-table-column",{attrs:{fixed:"right",label:"操作",width:"180"},scopedSlots:t._u([{key:"default",fn:function({row:s}){return[e("el-button",{attrs:{type:"text",size:"small"},on:{click:function(e){return t.$router.push(`/articles/edit/${s._id}`)}}},[t._v("编辑")]),e("el-button",{attrs:{type:"text",size:"small"},on:{click:function(e){return t.removeCategory(s)}}},[t._v("删除")])]}}])})],1)],1)},ft=[],vt={name:"ArticleList",data(){return{items:[]}},created(){this.fetch()},methods:{async fetch(){const t=await this.$http.get("rest/articles");this.items=t.data},removeCategory(t){this.$confirm(`是否确定要删除文章《${t.title}》`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{await this.$http.delete(`rest/articles/${t._id}`),this.$message({type:"success",message:"删除成功!"}),this.fetch()})).catch((()=>{this.$message({type:"info",message:"已取消删除"})}))}}},bt=vt,gt=(0,r.Z)(bt,ht,ft,!1,null,null,null),yt=gt.exports,_t=function(){var t=this,e=t._self._c;return e("div",{staticClass:"advert-edit"},[e("h1",[t._v(t._s(t.editId?"编辑":"新建")+"广告位")]),e("el-form",{attrs:{"label-width":"70px"},nativeOn:{submit:function(e){return e.preventDefault(),t.save.apply(null,arguments)}}},[e("el-form-item",{attrs:{label:"名称"}},[e("el-input",{model:{value:t.advertModel.name,callback:function(e){t.$set(t.advertModel,"name",e)},expression:"advertModel.name"}})],1),e("el-form-item",{attrs:{label:"广告"}},[e("el-button",{attrs:{size:"small"},on:{click:function(e){return t.advertModel.items.push({})}}},[e("i",{staticClass:"el-icon-plus"}),t._v(" 添加广告 ")]),e("el-row",{staticStyle:{"flex-wrap":"wrap"},attrs:{type:"flex"}},t._l(t.advertModel.items,(function(s,a){return e("el-col",{key:a,attrs:{md:24}},[e("el-form-item",{staticStyle:{"margin-top":"1rem"},attrs:{label:"跳转链接"}},[e("el-input",{model:{value:s.url,callback:function(e){t.$set(s,"url",e)},expression:"item.url"}})],1),e("el-form-item",{staticStyle:{"margin-top":"1rem"},attrs:{label:"图片"}},[e("el-upload",{staticClass:"avatar-uploader",attrs:{headers:t.getAuthHeaders(),action:t.uploadUrl,"show-file-list":!1,"on-success":e=>t.$set(s,"image",e.url)}},[s.image?e("img",{staticClass:"avatar",attrs:{src:s.image}}):e("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e("el-form-item",[e("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(e){return t.advertModel.items.splice(a,1)}}},[t._v("删除")])],1)],1)})),1)],1),e("el-form-item",[e("el-button",{attrs:{type:"primary","native-type":"submit"}},[t._v("保存")])],1)],1)],1)},$t=[],xt={name:"AdvertEdit",props:{editId:{type:String,default:""}},data(){return{advertModel:{name:"",items:[]}}},created(){this.editId&&this.fetch()},methods:{async fetch(){const t=await this.$http.get(`rest/adverts/${this.editId}`);this.advertModel=Object.assign({},this.advertModel,t.data)},async save(){this.editId?await this.$http.put(`rest/adverts/${this.editId}`,this.advertModel):await this.$http.post("rest/adverts",this.advertModel),this.$router.push("/adverts/list"),this.$message({type:"success",message:"保存成功"})}}},Mt=xt,wt=(0,r.Z)(Mt,_t,$t,!1,null,null,null),kt=wt.exports,It=function(){var t=this,e=t._self._c;return e("div",{staticClass:"advert-list"},[e("h1",[t._v("广告位列表")]),e("el-table",{attrs:{data:t.items}},[e("el-table-column",{attrs:{prop:"_id",label:"ID"}}),e("el-table-column",{attrs:{prop:"name",label:"名称"}}),e("el-table-column",{attrs:{fixed:"right",label:"操作",width:"180"},scopedSlots:t._u([{key:"default",fn:function({row:s}){return[e("el-button",{attrs:{type:"text",size:"small"},on:{click:function(e){return t.$router.push(`/adverts/edit/${s._id}`)}}},[t._v("编辑")]),e("el-button",{attrs:{type:"text",size:"small"},on:{click:function(e){return t.removeCategory(s)}}},[t._v("删除")])]}}])})],1)],1)},Ct=[],St={name:"AdvertList",data(){return{items:[]}},created(){this.fetch()},methods:{async fetch(){const t=await this.$http.get("rest/adverts");this.items=t.data},removeCategory(t){this.$confirm(`是否确定要删除广告位 "${t.name}"`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{await this.$http.delete(`rest/adverts/${t._id}`),this.$message({type:"success",message:"删除成功!"}),this.fetch()})).catch((()=>{this.$message({type:"info",message:"已取消删除"})}))}}},Ut=St,Tt=(0,r.Z)(Ut,It,Ct,!1,null,null,null),Ot=Tt.exports,zt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"admin-user-edit"},[e("h1",[t._v(t._s(t.editId?"编辑":"新建")+"管理员")]),e("el-form",{attrs:{"label-width":"120px"},nativeOn:{submit:function(e){return e.preventDefault(),t.save.apply(null,arguments)}}},[e("el-form-item",{attrs:{label:"用户名"}},[e("el-input",{model:{value:t.adminUserModel.username,callback:function(e){t.$set(t.adminUserModel,"username",e)},expression:"adminUserModel.username"}})],1),e("el-form-item",{attrs:{label:"密码"}},[e("el-input",{attrs:{type:"password"},model:{value:t.adminUserModel.password,callback:function(e){t.$set(t.adminUserModel,"password",e)},expression:"adminUserModel.password"}})],1),e("el-form-item",[e("el-button",{attrs:{type:"primary","native-type":"submit"}},[t._v("保存")])],1)],1)],1)},At=[],Zt={name:"AdminUserEdit",props:{editId:{type:String,default:""}},data(){return{adminUserModel:{}}},created(){this.editId&&this.fetch()},methods:{async fetch(){const t=await this.$http.get(`rest/admin_users/${this.editId}`);this.adminUserModel=t.data},async save(){this.editId?await this.$http.put(`rest/admin_users/${this.editId}`,this.adminUserModel):await this.$http.post("rest/admin_users",this.adminUserModel),this.$router.push("/admin_users/list"),this.$message({type:"success",message:"保存成功"})}}},Bt=Zt,Dt=(0,r.Z)(Bt,zt,At,!1,null,null,null),Et=Dt.exports,Ht=function(){var t=this,e=t._self._c;return e("div",{staticClass:"admin-user-list"},[e("h1",[t._v("管理员列表")]),e("el-table",{attrs:{data:t.items}},[e("el-table-column",{attrs:{prop:"_id",label:"ID"}}),e("el-table-column",{attrs:{prop:"username",label:"用户名"}}),e("el-table-column",{attrs:{fixed:"right",label:"操作",width:"180"},scopedSlots:t._u([{key:"default",fn:function({row:s}){return[e("el-button",{attrs:{type:"text",size:"small"},on:{click:function(e){return t.$router.push(`/admin_users/edit/${s._id}`)}}},[t._v("编辑")]),e("el-button",{attrs:{type:"text",size:"small"},on:{click:function(e){return t.removeAdminUser(s)}}},[t._v("删除")])]}}])})],1)],1)},Pt=[],jt={name:"AdminUserList",data(){return{items:[]}},created(){this.fetch()},methods:{async fetch(){const t=await this.$http.get("rest/admin_users");this.items=t.data},removeAdminUser(t){this.$confirm(`是否确定要删除管理员 "${t.name}"`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{await this.$http.delete(`rest/admin_users/${t._id}`),this.$message({type:"success",message:"删除成功!"}),this.fetch()})).catch((()=>{this.$message({type:"info",message:"已取消删除"})}))}}},Lt=jt,Rt=(0,r.Z)(Lt,Ht,Pt,!1,null,null,null),Vt=Rt.exports;a["default"].use(m.Z);const qt=[{path:"/login",name:"login",component:g,meta:{isPublic:!0}},{path:"/",name:"main",component:w,children:[{path:"/categories/create",component:T},{path:"/categories/edit/:editId",component:T,props:!0},{path:"/categories/list",component:D},{path:"/items/create",component:R},{path:"/items/edit/:editId",component:R,props:!0},{path:"/items/list",component:J},{path:"/heroes/create",component:tt},{path:"/heroes/edit/:editId",component:tt,props:!0},{path:"/heroes/list",component:rt},{path:"/articles/create",component:pt},{path:"/articles/edit/:editId",component:pt,props:!0},{path:"/articles/list",component:yt},{path:"/adverts/create",component:kt},{path:"/adverts/edit/:editId",component:kt,props:!0},{path:"/adverts/list",component:Ot},{path:"/admin_users/create",component:Et},{path:"/admin_users/edit/:editId",component:Et,props:!0},{path:"/admin_users/list",component:Vt}]}],Ft=new m.Z({routes:qt});Ft.beforeEach(((t,e,s)=>{t.meta.isPublic||localStorage.token||s("/login"),s()}));var Nt=Ft,Gt=s(9669),Jt=s.n(Gt);const Kt=Jt().create({baseURL:{NODE_ENV:"production",BASE_URL:"/admin/"}.VUE_APP_API_URL||"/admin/api"});Kt.interceptors.request.use((t=>(localStorage.token&&(t.headers.Authorization="Bearer "+localStorage.token),t)),(t=>Promise.reject(t))),Kt.interceptors.response.use((t=>t),(t=>{const e=t.response.data?.message;return e&&(a["default"].prototype.$message.error(e),401===t.response.status&&Nt.push("/login")),Promise.reject(t)}));var Qt=Kt;a["default"].config.productionTip=!1,a["default"].prototype.$http=Qt,a["default"].mixin({computed:{uploadUrl(){return this.$http.defaults.baseURL+"/upload"}},methods:{getAuthHeaders(){return{Authorization:`Bearer ${localStorage.token||""}`}}}}),new a["default"]({router:Nt,render:t=>t(c)}).$mount("#app")}},e={};function s(a){var l=e[a];if(void 0!==l)return l.exports;var i=e[a]={exports:{}};return t[a].call(i.exports,i,i.exports,s),i.exports}s.m=t,function(){var t=[];s.O=function(e,a,l,i){if(!a){var r=1/0;for(u=0;u<t.length;u++){a=t[u][0],l=t[u][1],i=t[u][2];for(var o=!0,n=0;n<a.length;n++)(!1&i||r>=i)&&Object.keys(s.O).every((function(t){return s.O[t](a[n])}))?a.splice(n--,1):(o=!1,i<r&&(r=i));if(o){t.splice(u--,1);var c=l();void 0!==c&&(e=c)}}return e}i=i||0;for(var u=t.length;u>0&&t[u-1][2]>i;u--)t[u]=t[u-1];t[u]=[a,l,i]}}(),function(){s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,{a:e}),e}}(),function(){s.d=function(t,e){for(var a in e)s.o(e,a)&&!s.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={143:0};s.O.j=function(e){return 0===t[e]};var e=function(e,a){var l,i,r=a[0],o=a[1],n=a[2],c=0;if(r.some((function(e){return 0!==t[e]}))){for(l in o)s.o(o,l)&&(s.m[l]=o[l]);if(n)var u=n(s)}for(e&&e(a);c<r.length;c++)i=r[c],s.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return s.O(u)},a=self["webpackChunkadmin"]=self["webpackChunkadmin"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))}();var a=s.O(void 0,[998],(function(){return s(85)}));a=s.O(a)})();
//# sourceMappingURL=app.3c25d0d6.js.map